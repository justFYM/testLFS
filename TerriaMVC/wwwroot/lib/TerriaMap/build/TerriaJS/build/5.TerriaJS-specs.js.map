{"version":3,"sources":["webpack:///./lib/ReactViews/Tools/DiffTool/DiffTool.tsx","webpack:///./lib/ReactViews/Tools/DiffTool/DatePicker.tsx","webpack:///./lib/ReactViews/Tools/DiffTool/LocationPicker.tsx","webpack:///./wwwroot/images/difference-pin.png"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","Object","defineProperty","exports","value","_dec","_class","_class2","_descriptor","_descriptor2","_descriptor3","_class3","_temp","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_class4","_class5","_descriptor4","_descriptor5","_descriptor6","_styledComponents","_interopRequireWildcard","_hoistNonReactStatics","_interopRequireDefault","_mobx","_mobxReact","_react","_reactDom","_reactI18next","_Cartographic","_createGuid","_Math","_SplitDirection","_filterOutUndefined","_isDefined","_prettifyCoordinates2","_DiffableMixin","_MappableMixin","_CommonStrata","_hasTraits","_LocationMarkerUtils","_SplitItemReference","_Box","_Button","_Select","_Spacing","_Text","_ImageryProviderTraits","_parseCustomMarkdownToReact","_Icon","_Loader","_DatePicker","_LocationPicker","_registerMapNavigations","__esModule","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","hasOwnProperty","call","desc","set","_extends","assign","target","i","arguments","length","source","apply","this","_slicedToArray","arr","Array","isArray","_arrayWithHoles","_i","_s","_e","_arr","_n","_d","next","done","push","err","_iterableToArrayLimit","o","minLen","_arrayLikeToArray","n","toString","slice","name","from","test","_unsupportedIterableToArray","TypeError","_nonIterableRest","len","arr2","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","Promise","then","_asyncToGenerator","fn","self","args","undefined","_initializerDefineProperty","property","descriptor","context","enumerable","configurable","writable","initializer","_classCallCheck","instance","Constructor","_defineProperties","props","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","_setPrototypeOf","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","e","_isNativeReflectConstruct","result","Super","_getPrototypeOf","NewTarget","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","getPrototypeOf","_defineProperty","_applyDecoratedDescriptor","decorators","keys","forEach","reverse","reduce","decorator","dateFormat","DiffTool","action","bound","observer","_React$Component","_createSplitterItems","_super","_this","makeObservable","userSelectedSourceItem","sourceItem","regeneratorRuntime","mark","_callee","_yield$Promise$all","_yield$Promise$all2","leftItem","rightItem","_this2","wrap","_context","prev","all","createSplitItem","LEFT","RIGHT","sent","runInAction","t0","stop","removeSplitItem","_this3","splitterItemsDisposer","reaction","removeSplitterItems","createSplitterItems","fireImmediately","viewState","terria","originalSettings","showSplitter","isMapFullScreen","setIsMapFullScreen","setTrait","user","mapNavigationModel","show","CLOSE_TOOL_ID","elements","visible","closeTool","findItem","controller","activate","_this$splitterItemsDi","hide","deactivate","enterDiffTool","leaveDiffTool","createElement","Main","theme","changeSourceItem","Component","observable","computed","_React$Component2","_setLocationFromActiveSearch","_super2","_this4","createRef","t","_locationPickError","title","beforePick","afterPick","location","longitude","latitude","digits","firstDate","leftDate","secondDate","rightDate","d1","d2","concat","workbench","items","filter","item","isMixedInto","canDiffImages","_this$diffItem$styleS","_this$diffItem$styleS2","diffItem","styleSelectableDimensions","selectedId","diffStyleId","_this5","availableDiffStyles","map","_this5$diffItem$style","_this5$diffItem$style2","_this5$diffItem$style3","options","find","style","id","currentDiscreteJulianDate","diffStyle","getLegendUrlForStyle","previewStyle","model","hasOpacity","newSourceItem","diffableItemsInWorkbench","uniqueId","_this$props$leftItem$","_this$props$leftItem$2","_this$props$rightItem","_this$props$rightItem2","styleId","setDimensionValue","pickingLocation","_isPickingNewLocation","pickedFeatures","pickedLocation","_this$props","feature","features","f","doesFeatureBelongToItem","setTimeFilterFeature","providerCoords","_this$props2","hideItem","overlays","remove","add","diffItemName","showDiffImage","clearDiffImage","setDefaultDiffStyle","_callee2","markerLocation","part","imageryProvider","promises","_this6","_context2","getMarkerLocation","mapItems","ImageryParts","is","setTimeFilterFromLocation","some","ok","removeMarker","_this7","_this7$diffItem$timeF","timeFilterCoordinates","height","setLocationFromActiveSearch","_this$diffItem$styleS3","_this$diffItem$styleS4","_this$diffItem$styleS5","_this8","_this$props3","isShowingDiff","datesSelected","isReadyToGenerateDiff","large","DiffAccordion","MainPanel","styledMaxHeight","bottomDockHeight","Fragment","centered","left","_StyledBackButton","transparentBg","onClick","resetTool","$_css","textLight","$_css2","BoxSpan","_StyledStyledIcon","light","styledWidth","glyph","GLYPHS","arrowDown","TextSpan","noFontSize","bottom","medium","LocationAndDatesDisplayBox","textLightDimmed","small","column","alignItemsFlexStart","RawButton","ref","openLeftDatePickerButton","isLink","openRightDatePickerButton","unsetDates","Selector","onChange","label","disabled","spacingBottom","changePreviewStyle","previewLegendUrl","LegendImage","width","src","changeDiffStyle","diffLegendUrl","GenerateButton","generateDiff","CloseDifferenceButton","primary","rounded","textProps","semiBold","extraLarge","activeStyles","renderIcon","StyledIcon","closeLight","iconProps","css","onPicking","onUserPickingLocation","onPicked","onUserPickLocation","createPortal","fullWidth","flexWrap","backgroundColor","dark","heading","externalOpenButton","onDateSet","showItem","AreaFilterSelection","isPickingNewLocation","document","getElementById","DiffAccordionToggle","withConfig","displayName","componentId","_ref","borderRadiusTop","radius40Button","_useState2","useState","showChildren","setShowChildren","useTheme","DiffAccordionWrapper","paddedVertically","paddedHorizontally","justifySpaceBetween","colorSecondary","difference","right","styledFontSize","styledLineHeight","_StyledBox","$_css3","uppercase","paddedRatio","opened","closed","children","attrs","position","parseInt","workbenchWidth","overflowY","_ref2","borderRadiusBottom","darkWithOverlay","BackButton","secondary","splitter","_StyledText","$_css4","parseCustomMarkdownToReactWithOptions","injectTermsAsTooltips","tooltipTerms","configParameters","helpContentTerms","locationText","_prettifyCoordinates","_StyledBox2","styledMinWidth","location2","styledMinHeight","_StyledText2","extraExtraLarge","bold","message","textAlignCenter","charcoalGreyBg","display","marginTop","onLoad","onError","_x","_x2","_createSplitItem","_callee3","splitDirection","_context3","addModel","loadReference","abrupt","_newItem$styleSelecta","_newItem$styleSelecta2","_newItem$styleSelecta3","Error","newItem","_newItem$styleSelecta4","_newItem$styleSelecta5","trueColor","search","availableStyles","_item$styleSelectable","_item$styleSelectable2","_item$styleSelectable3","sourceReference","contains","removeModelReferences","_feature$imageryLayer","imageryLayer","m","im","carto","toRadians","tile","tilingScheme","positionToTileXY","tileCoords","x","y","level","_default","withTranslation","withTheme","md","_ref3","_JulianDate","_DateFormats","_DateTimePicker","DatePicker","date","toDate","currentDate","formatDateTime","isOpen","stopPropagation","toISOString","moveToPreviousDiscreteTime","moveToNextDiscreteTime","event","setIsOpen","_this$props$externalO","current","addEventListener","onClickExternalButton","_externalOpenButton$c","removeEventListener","registerExternalButtonClick","prevProps","unregisterExternalButtonClick","flex","calendar2","PrevButton","isPreviousDiscreteTimeAvailable","moveToPreviousDate","DateButton","toggleOpen","formattedCurrentDate","NextButton","isNextDiscreteTimeAvailable","moveToNextDate","dates","objectifiedDates","changeCurrentDate","openDirection","onOpen","onClose","PagerButton","colorPrimary","centerWithFlex","_StyledStyledIcon2","borderRadiusLeft","_StyledStyledIcon3","borderRadiusRight","lg","_Ellipsoid","_MapInteractionMode","LocationPicker","pickMode","messageAsNode","uiMode","UIMode","Difference","mode","mapInteractionModeStack","addInteractionModeToMap","showMarker","pickDisposer","newPick","_newPick$allFeaturesA","pickPosition","customUi","cartesian","WGS84","cartesianToCartographic","toDegrees","currentPick","allFeaturesAvailablePromise","_this$pickDisposer","pop","removeInteractionModeFromMap","setupPicker","destroyPicker","addMarker","customMarkerIcon","module"],"mappings":"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","file":"5.TerriaJS-specs.js","sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nrequire(\"core-js/modules/es.array.for-each.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"core-js/modules/es.object.keys.js\");\n\nrequire(\"core-js/modules/es.array.reduce.js\");\n\nrequire(\"core-js/modules/es.array.reverse.js\");\n\nrequire(\"core-js/modules/es.array.slice.js\");\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.object.set-prototype-of.js\");\n\nrequire(\"core-js/modules/es.object.get-prototype-of.js\");\n\nrequire(\"core-js/modules/es.reflect.construct.js\");\n\nrequire(\"core-js/modules/es.object.create.js\");\n\nrequire(\"core-js/modules/es.array.is-array.js\");\n\nrequire(\"core-js/modules/es.symbol.js\");\n\nrequire(\"core-js/modules/es.symbol.description.js\");\n\nrequire(\"core-js/modules/es.symbol.iterator.js\");\n\nrequire(\"core-js/modules/es.array.from.js\");\n\nrequire(\"core-js/modules/es.object.assign.js\");\n\nrequire(\"core-js/modules/es.weak-map.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nrequire(\"regenerator-runtime/runtime.js\");\n\nrequire(\"core-js/modules/es.array.iterator.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.promise.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\n\nrequire(\"core-js/modules/es.function.name.js\");\n\nrequire(\"core-js/modules/es.array.concat.js\");\n\nrequire(\"core-js/modules/es.array.filter.js\");\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nrequire(\"core-js/modules/es.array.find.js\");\n\nrequire(\"core-js/modules/es.array.some.js\");\n\nrequire(\"core-js/modules/es.parse-int.js\");\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nrequire(\"core-js/modules/es.string.search.js\");\n\nvar _styledComponents = _interopRequireWildcard(require(\"styled-components\"));\n\nvar _hoistNonReactStatics = _interopRequireDefault(require(\"hoist-non-react-statics\"));\n\nvar _mobx = require(\"mobx\");\n\nvar _mobxReact = require(\"mobx-react\");\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactDom = _interopRequireDefault(require(\"react-dom\"));\n\nvar _reactI18next = require(\"react-i18next\");\n\nvar _Cartographic = _interopRequireDefault(require(\"terriajs-cesium/Source/Core/Cartographic\"));\n\nvar _createGuid = _interopRequireDefault(require(\"terriajs-cesium/Source/Core/createGuid\"));\n\nvar _Math = _interopRequireDefault(require(\"terriajs-cesium/Source/Core/Math\"));\n\nvar _SplitDirection = _interopRequireDefault(require(\"terriajs-cesium/Source/Scene/SplitDirection\"));\n\nvar _filterOutUndefined = _interopRequireDefault(require(\"../../../Core/filterOutUndefined\"));\n\nvar _isDefined = _interopRequireDefault(require(\"../../../Core/isDefined\"));\n\nvar _prettifyCoordinates2 = _interopRequireDefault(require(\"../../../Map/Vector/prettifyCoordinates\"));\n\nvar _DiffableMixin = _interopRequireDefault(require(\"../../../ModelMixins/DiffableMixin\"));\n\nvar _MappableMixin = _interopRequireWildcard(require(\"../../../ModelMixins/MappableMixin\"));\n\nvar _CommonStrata = _interopRequireDefault(require(\"../../../Models/Definition/CommonStrata\"));\n\nvar _hasTraits = _interopRequireDefault(require(\"../../../Models/Definition/hasTraits\"));\n\nvar _LocationMarkerUtils = require(\"../../../Models/LocationMarkerUtils\");\n\nvar _SplitItemReference = _interopRequireDefault(require(\"../../../Models/Catalog/CatalogReferences/SplitItemReference\"));\n\nvar _Box = _interopRequireWildcard(require(\"../../../Styled/Box\"));\n\nvar _Button = _interopRequireWildcard(require(\"../../../Styled/Button\"));\n\nvar _Select = _interopRequireDefault(require(\"../../../Styled/Select\"));\n\nvar _Spacing = _interopRequireDefault(require(\"../../../Styled/Spacing\"));\n\nvar _Text = _interopRequireWildcard(require(\"../../../Styled/Text\"));\n\nvar _ImageryProviderTraits = _interopRequireDefault(require(\"../../../Traits/TraitsClasses/ImageryProviderTraits\"));\n\nvar _parseCustomMarkdownToReact = require(\"../../Custom/parseCustomMarkdownToReact\");\n\nvar _Icon = require(\"../../../Styled/Icon\");\n\nvar _Loader = _interopRequireDefault(require(\"../../Loader\"));\n\nvar _DatePicker = _interopRequireDefault(require(\"./DatePicker\"));\n\nvar _LocationPicker = _interopRequireDefault(require(\"./LocationPicker\"));\n\nvar _registerMapNavigations = require(\"../../Map/Navigation/registerMapNavigations\");\n\nvar _dec, _class, _class2, _descriptor, _descriptor2, _descriptor3, _class3, _temp, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _dec8, _dec9, _class4, _class5, _descriptor4, _descriptor5, _descriptor6;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _initializerDefineProperty(target, property, descriptor, context) { if (!descriptor) return; Object.defineProperty(target, property, { enumerable: descriptor.enumerable, configurable: descriptor.configurable, writable: descriptor.writable, value: descriptor.initializer ? descriptor.initializer.call(context) : void 0 }); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\nfunction _initializerWarningHelper(descriptor, context) { throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and runs after the decorators transform.'); }\n\nvar dateFormat = require(\"dateformat\");\n\nvar DiffTool = (_dec = _mobx.action.bound, (0, _mobxReact.observer)(_class = (_class2 = (_temp = _class3 = /*#__PURE__*/function (_React$Component) {\n  _inherits(DiffTool, _React$Component);\n\n  var _super = _createSuper(DiffTool);\n\n  function DiffTool(props) {\n    var _this;\n\n    _classCallCheck(this, DiffTool);\n\n    _this = _super.call(this, props);\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"leftItem\", _descriptor, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"rightItem\", _descriptor2, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"userSelectedSourceItem\", _descriptor3, _assertThisInitialized(_this));\n\n    _defineProperty(_assertThisInitialized(_this), \"splitterItemsDisposer\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"originalSettings\", void 0);\n\n    (0, _mobx.makeObservable)(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(DiffTool, [{\n    key: \"sourceItem\",\n    get: function get() {\n      return this.userSelectedSourceItem || this.props.sourceItem;\n    }\n  }, {\n    key: \"changeSourceItem\",\n    value: function changeSourceItem(sourceItem) {\n      this.userSelectedSourceItem = sourceItem;\n    }\n  }, {\n    key: \"createSplitterItems\",\n    value: function () {\n      var _createSplitterItems = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        var _yield$Promise$all, _yield$Promise$all2, leftItem, rightItem;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return Promise.all([createSplitItem(this.sourceItem, _SplitDirection[\"default\"].LEFT), createSplitItem(this.sourceItem, _SplitDirection[\"default\"].RIGHT)]);\n\n              case 3:\n                _yield$Promise$all = _context.sent;\n                _yield$Promise$all2 = _slicedToArray(_yield$Promise$all, 2);\n                leftItem = _yield$Promise$all2[0];\n                rightItem = _yield$Promise$all2[1];\n                (0, _mobx.runInAction)(function () {\n                  _this2.leftItem = leftItem;\n                  _this2.rightItem = rightItem;\n                });\n                _context.next = 12;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](0);\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 10]]);\n      }));\n\n      function createSplitterItems() {\n        return _createSplitterItems.apply(this, arguments);\n      }\n\n      return createSplitterItems;\n    }()\n  }, {\n    key: \"removeSplitterItems\",\n    value: function removeSplitterItems() {\n      this.leftItem && removeSplitItem(this.leftItem);\n      this.rightItem && removeSplitItem(this.rightItem);\n    }\n  }, {\n    key: \"enterDiffTool\",\n    value: function enterDiffTool() {\n      var _this3 = this;\n\n      // Start the reaction that splits the sourceItem into left & right items\n      this.splitterItemsDisposer = (0, _mobx.reaction)(function () {\n        return _this3.sourceItem;\n      }, function () {\n        _this3.removeSplitterItems();\n\n        _this3.createSplitterItems();\n      }, {\n        fireImmediately: true\n      });\n      var viewState = this.props.viewState;\n      var terria = viewState.terria;\n      this.originalSettings = {\n        showSplitter: terria.showSplitter,\n        isMapFullScreen: viewState.isMapFullScreen\n      };\n      terria.showSplitter = true;\n      viewState.setIsMapFullScreen(true);\n      this.sourceItem.setTrait(_CommonStrata[\"default\"].user, \"show\", false);\n      terria.mapNavigationModel.show(_registerMapNavigations.CLOSE_TOOL_ID);\n      terria.elements.set(\"timeline\", {\n        visible: false\n      });\n      var closeTool = terria.mapNavigationModel.findItem(_registerMapNavigations.CLOSE_TOOL_ID);\n\n      if (closeTool) {\n        closeTool.controller.activate();\n      }\n    }\n  }, {\n    key: \"leaveDiffTool\",\n    value: function leaveDiffTool() {\n      var _this$splitterItemsDi;\n\n      var viewState = this.props.viewState;\n      var terria = viewState.terria;\n      var originalSettings = this.originalSettings;\n      this.removeSplitterItems();\n      (_this$splitterItemsDi = this.splitterItemsDisposer) === null || _this$splitterItemsDi === void 0 ? void 0 : _this$splitterItemsDi.call(this);\n      terria.showSplitter = originalSettings.showSplitter;\n      viewState.setIsMapFullScreen(originalSettings.isMapFullScreen);\n      this.sourceItem.setTrait(_CommonStrata[\"default\"].user, \"show\", true);\n      terria.mapNavigationModel.hide(_registerMapNavigations.CLOSE_TOOL_ID);\n      terria.elements.set(\"timeline\", {\n        visible: true\n      });\n      var closeTool = terria.mapNavigationModel.findItem(_registerMapNavigations.CLOSE_TOOL_ID);\n\n      if (closeTool) {\n        closeTool.controller.deactivate();\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.enterDiffTool();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.leaveDiffTool();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.leftItem && this.rightItem) {\n        return /*#__PURE__*/_react[\"default\"].createElement(Main, _extends({}, this.props, {\n          theme: this.props.theme,\n          terria: this.props.viewState.terria,\n          sourceItem: this.sourceItem,\n          changeSourceItem: this.changeSourceItem,\n          leftItem: this.leftItem,\n          rightItem: this.rightItem\n        }));\n      } else return null;\n    }\n  }]);\n\n  return DiffTool;\n}(_react[\"default\"].Component), _defineProperty(_class3, \"toolName\", \"Image Difference\"), _temp), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"leftItem\", [_mobx.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, \"rightItem\", [_mobx.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, \"userSelectedSourceItem\", [_mobx.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _applyDecoratedDescriptor(_class2.prototype, \"sourceItem\", [_mobx.computed], Object.getOwnPropertyDescriptor(_class2.prototype, \"sourceItem\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"changeSourceItem\", [_dec], Object.getOwnPropertyDescriptor(_class2.prototype, \"changeSourceItem\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"createSplitterItems\", [_mobx.action], Object.getOwnPropertyDescriptor(_class2.prototype, \"createSplitterItems\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"removeSplitterItems\", [_mobx.action], Object.getOwnPropertyDescriptor(_class2.prototype, \"removeSplitterItems\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"enterDiffTool\", [_mobx.action], Object.getOwnPropertyDescriptor(_class2.prototype, \"enterDiffTool\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"leaveDiffTool\", [_mobx.action], Object.getOwnPropertyDescriptor(_class2.prototype, \"leaveDiffTool\"), _class2.prototype)), _class2)) || _class);\nvar Main = (_dec2 = _mobx.action.bound, _dec3 = _mobx.action.bound, _dec4 = _mobx.action.bound, _dec5 = _mobx.action.bound, _dec6 = _mobx.action.bound, _dec7 = _mobx.action.bound, _dec8 = _mobx.action.bound, _dec9 = _mobx.action.bound, (0, _mobxReact.observer)(_class4 = (_class5 = /*#__PURE__*/function (_React$Component2) {\n  _inherits(Main, _React$Component2);\n\n  var _super2 = _createSuper(Main);\n\n  function Main(props) {\n    var _this4;\n\n    _classCallCheck(this, Main);\n\n    _this4 = _super2.call(this, props);\n\n    _initializerDefineProperty(_assertThisInitialized(_this4), \"location\", _descriptor4, _assertThisInitialized(_this4));\n\n    _initializerDefineProperty(_assertThisInitialized(_this4), \"_locationPickError\", _descriptor5, _assertThisInitialized(_this4));\n\n    _initializerDefineProperty(_assertThisInitialized(_this4), \"_isPickingNewLocation\", _descriptor6, _assertThisInitialized(_this4));\n\n    _defineProperty(_assertThisInitialized(_this4), \"openLeftDatePickerButton\", /*#__PURE__*/_react[\"default\"].createRef());\n\n    _defineProperty(_assertThisInitialized(_this4), \"openRightDatePickerButton\", /*#__PURE__*/_react[\"default\"].createRef());\n\n    (0, _mobx.makeObservable)(_assertThisInitialized(_this4));\n    return _this4;\n  }\n\n  _createClass(Main, [{\n    key: \"locationPickerMessages\",\n    get: function get() {\n      var t = this.props.t;\n\n      if (this._locationPickError) {\n        return {\n          title: t(\"diffTool.locationPicker.errorMessages.title\"),\n          beforePick: t(\"diffTool.locationPicker.errorMessages.beforePick\"),\n          afterPick: t(\"diffTool.locationPicker.errorMessages.afterPick\")\n        };\n      } else if (this.location) {\n        return {\n          title: t(\"diffTool.locationPicker.nextMessages.title\", (0, _prettifyCoordinates2[\"default\"])(this.location.longitude, this.location.latitude, {\n            digits: 2\n          })),\n          beforePick: t(\"diffTool.locationPicker.nextMessages.beforePick\"),\n          afterPick: t(\"diffTool.locationPicker.nextMessages.afterPick\")\n        };\n      } else {\n        return {\n          title: t(\"diffTool.locationPicker.initialMessages.title\"),\n          beforePick: t(\"diffTool.locationPicker.initialMessages.beforePick\"),\n          afterPick: t(\"diffTool.locationPicker.initialMessages.afterPick\")\n        };\n      }\n    }\n  }, {\n    key: \"diffItem\",\n    get: function get() {\n      return this.props.leftItem;\n    }\n  }, {\n    key: \"diffItemName\",\n    get: function get() {\n      var name = this.props.sourceItem.name || \"\";\n      var firstDate = this.leftDate;\n      var secondDate = this.rightDate;\n      var format = \"yyyy/mm/dd\";\n\n      if (!firstDate || !secondDate) {\n        return name;\n      } else {\n        var d1 = dateFormat(firstDate, format);\n        var d2 = dateFormat(secondDate, format);\n        return \"\".concat(name, \" - difference for dates \").concat(d1, \", \").concat(d2);\n      }\n    }\n  }, {\n    key: \"diffableItemsInWorkbench\",\n    get: function get() {\n      return this.props.terria.workbench.items.filter(function (item) {\n        return _DiffableMixin[\"default\"].isMixedInto(item) && item.canDiffImages;\n      });\n    }\n  }, {\n    key: \"previewStyle\",\n    get: function get() {\n      var _this$diffItem$styleS, _this$diffItem$styleS2;\n\n      return (_this$diffItem$styleS = this.diffItem.styleSelectableDimensions) === null || _this$diffItem$styleS === void 0 ? void 0 : (_this$diffItem$styleS2 = _this$diffItem$styleS[0]) === null || _this$diffItem$styleS2 === void 0 ? void 0 : _this$diffItem$styleS2.selectedId;\n    }\n  }, {\n    key: \"diffStyle\",\n    get: function get() {\n      return this.diffItem.diffStyleId;\n    }\n  }, {\n    key: \"availableDiffStyles\",\n    get: function get() {\n      var _this5 = this;\n\n      return (0, _filterOutUndefined[\"default\"])(this.diffItem.availableDiffStyles.map(function (diffStyleId) {\n        var _this5$diffItem$style, _this5$diffItem$style2, _this5$diffItem$style3;\n\n        return (_this5$diffItem$style = _this5.diffItem.styleSelectableDimensions) === null || _this5$diffItem$style === void 0 ? void 0 : (_this5$diffItem$style2 = _this5$diffItem$style[0]) === null || _this5$diffItem$style2 === void 0 ? void 0 : (_this5$diffItem$style3 = _this5$diffItem$style2.options) === null || _this5$diffItem$style3 === void 0 ? void 0 : _this5$diffItem$style3.find(function (style) {\n          return style.id === diffStyleId;\n        });\n      }));\n    }\n  }, {\n    key: \"leftDate\",\n    get: function get() {\n      return this.props.leftItem.currentDiscreteJulianDate;\n    }\n  }, {\n    key: \"rightDate\",\n    get: function get() {\n      return this.props.rightItem.currentDiscreteJulianDate;\n    }\n  }, {\n    key: \"diffLegendUrl\",\n    get: function get() {\n      return this.diffStyle && this.leftDate && this.rightDate && this.diffItem.getLegendUrlForStyle(this.diffStyle, this.leftDate, this.rightDate);\n    }\n  }, {\n    key: \"previewLegendUrl\",\n    get: function get() {\n      return this.previewStyle && this.diffItem.getLegendUrlForStyle(this.previewStyle);\n    }\n  }, {\n    key: \"showItem\",\n    value: function showItem(model) {\n      // We change the opacity instead of setting `show` to true/false, because\n      // we want the item to be on the map for date selection to work\n      hasOpacity(model) && model.setTrait(_CommonStrata[\"default\"].user, \"opacity\", 0.8);\n    }\n  }, {\n    key: \"hideItem\",\n    value: function hideItem(model) {\n      // We change the opacity instead of setting `show` to true/false, because\n      // we want the item to be on the map for date selection to work\n      hasOpacity(model) && model.setTrait(_CommonStrata[\"default\"].user, \"opacity\", 0);\n    }\n  }, {\n    key: \"changeSourceItem\",\n    value: function changeSourceItem(e) {\n      var newSourceItem = this.diffableItemsInWorkbench.find(function (item) {\n        return item.uniqueId === e.target.value;\n      });\n      if (newSourceItem) this.props.changeSourceItem(newSourceItem);\n    }\n  }, {\n    key: \"changePreviewStyle\",\n    value: function changePreviewStyle(e) {\n      var _this$props$leftItem$, _this$props$leftItem$2, _this$props$rightItem, _this$props$rightItem2;\n\n      var styleId = e.target.value;\n      (_this$props$leftItem$ = this.props.leftItem.styleSelectableDimensions) === null || _this$props$leftItem$ === void 0 ? void 0 : (_this$props$leftItem$2 = _this$props$leftItem$[0]) === null || _this$props$leftItem$2 === void 0 ? void 0 : _this$props$leftItem$2.setDimensionValue(_CommonStrata[\"default\"].user, styleId);\n      (_this$props$rightItem = this.props.rightItem.styleSelectableDimensions) === null || _this$props$rightItem === void 0 ? void 0 : (_this$props$rightItem2 = _this$props$rightItem[0]) === null || _this$props$rightItem2 === void 0 ? void 0 : _this$props$rightItem2.setDimensionValue(_CommonStrata[\"default\"].user, styleId);\n    }\n  }, {\n    key: \"changeDiffStyle\",\n    value: function changeDiffStyle(e) {\n      this.diffItem.setTrait(_CommonStrata[\"default\"].user, \"diffStyleId\", e.target.value);\n    }\n  }, {\n    key: \"onUserPickingLocation\",\n    value: function onUserPickingLocation(pickingLocation) {\n      this._isPickingNewLocation = true;\n    }\n  }, {\n    key: \"onUserPickLocation\",\n    value: function onUserPickLocation(pickedFeatures, pickedLocation) {\n      var _this$props = this.props,\n          leftItem = _this$props.leftItem,\n          rightItem = _this$props.rightItem,\n          t = _this$props.t;\n      var feature = pickedFeatures.features.find(function (f) {\n        return doesFeatureBelongToItem(f, leftItem) || doesFeatureBelongToItem(f, rightItem);\n      });\n\n      if (feature) {\n        leftItem.setTimeFilterFeature(feature, pickedFeatures.providerCoords);\n        rightItem.setTimeFilterFeature(feature, pickedFeatures.providerCoords);\n        this.location = pickedLocation;\n        this._locationPickError = false;\n      } else {\n        this._locationPickError = true;\n      }\n\n      this._isPickingNewLocation = false;\n    }\n  }, {\n    key: \"unsetDates\",\n    value: function unsetDates() {\n      var _this$props2 = this.props,\n          leftItem = _this$props2.leftItem,\n          rightItem = _this$props2.rightItem;\n      leftItem.setTrait(_CommonStrata[\"default\"].user, \"currentTime\", null);\n      rightItem.setTrait(_CommonStrata[\"default\"].user, \"currentTime\", null);\n      this.hideItem(leftItem);\n      this.hideItem(rightItem);\n    }\n  }, {\n    key: \"generateDiff\",\n    value: function generateDiff() {\n      if (this.leftDate === undefined || this.rightDate === undefined || this.diffStyle === undefined) {\n        return;\n      }\n\n      var terria = this.props.terria;\n      terria.overlays.remove(this.props.leftItem);\n      terria.overlays.remove(this.props.rightItem);\n      terria.workbench.add(this.diffItem);\n      this.diffItem.setTrait(_CommonStrata[\"default\"].user, \"name\", this.diffItemName);\n      this.diffItem.showDiffImage(this.leftDate, this.rightDate, this.diffStyle);\n      terria.showSplitter = false;\n    }\n  }, {\n    key: \"resetTool\",\n    value: function resetTool() {\n      var terria = this.props.terria;\n      this.diffItem.clearDiffImage();\n      setDefaultDiffStyle(this.diffItem);\n      terria.overlays.add(this.props.leftItem);\n      terria.overlays.add(this.props.rightItem);\n      terria.workbench.remove(this.diffItem);\n      this.props.terria.showSplitter = true;\n      this.props.leftItem.setTrait(_CommonStrata[\"default\"].user, \"splitDirection\", _SplitDirection[\"default\"].LEFT);\n      this.props.rightItem.setTrait(_CommonStrata[\"default\"].user, \"splitDirection\", _SplitDirection[\"default\"].RIGHT);\n    }\n  }, {\n    key: \"setLocationFromActiveSearch\",\n    value: function () {\n      var _setLocationFromActiveSearch = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var _this6 = this;\n\n        var markerLocation, sourceItem, part, imageryProvider, promises, someSuccessful;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                // Look for any existing marker like from a search result and filter\n                // imagery at that location\n                markerLocation = (0, _LocationMarkerUtils.getMarkerLocation)(this.props.terria);\n                sourceItem = this.props.sourceItem;\n\n                if (!(markerLocation && _MappableMixin[\"default\"].isMixedInto(sourceItem))) {\n                  _context2.next = 11;\n                  break;\n                }\n\n                part = sourceItem.mapItems.find(function (p) {\n                  return _MappableMixin.ImageryParts.is(p);\n                });\n                imageryProvider = part && _MappableMixin.ImageryParts.is(part) && part.imageryProvider;\n\n                if (!imageryProvider) {\n                  _context2.next = 11;\n                  break;\n                }\n\n                promises = [setTimeFilterFromLocation(this.props.leftItem, markerLocation, imageryProvider), setTimeFilterFromLocation(this.props.rightItem, markerLocation, imageryProvider)];\n                _context2.next = 9;\n                return Promise.all(promises);\n\n              case 9:\n                someSuccessful = _context2.sent.some(function (ok) {\n                  return ok;\n                });\n\n                if (someSuccessful) {\n                  (0, _mobx.runInAction)(function () {\n                    return _this6.location = markerLocation;\n                  });\n                } else {\n                  // If we cannot resolve imagery at the marker location, remove it\n                  (0, _LocationMarkerUtils.removeMarker)(this.props.terria);\n                }\n\n              case 11:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function setLocationFromActiveSearch() {\n        return _setLocationFromActiveSearch.apply(this, arguments);\n      }\n\n      return setLocationFromActiveSearch;\n    }()\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this7 = this;\n\n      (0, _mobx.runInAction)(function () {\n        if (_this7.location === undefined) {\n          var _this7$diffItem$timeF = _this7.diffItem.timeFilterCoordinates,\n              latitude = _this7$diffItem$timeF.latitude,\n              longitude = _this7$diffItem$timeF.longitude,\n              height = _this7$diffItem$timeF.height;\n\n          if (latitude !== undefined && longitude !== undefined) {\n            _this7.location = {\n              latitude: latitude,\n              longitude: longitude,\n              height: height\n            }; // remove any active search location marker to avoid showing two markers\n\n            (0, _LocationMarkerUtils.removeMarker)(_this7.props.terria);\n          } else {\n            _this7.setLocationFromActiveSearch();\n          }\n        }\n      });\n    } // i want to restructure the render so that there's 2 distinct \"showing diff\"\n    // or not states, right now intertwining them means way too many conditionals\n    // that confuse the required spacing etc.\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$diffItem$styleS3,\n          _this$diffItem$styleS4,\n          _this$diffItem$styleS5,\n          _this8 = this;\n\n      var _this$props3 = this.props,\n          terria = _this$props3.terria,\n          viewState = _this$props3.viewState,\n          sourceItem = _this$props3.sourceItem,\n          t = _this$props3.t,\n          theme = _this$props3.theme;\n      var isShowingDiff = this.diffItem.isShowingDiff;\n      var datesSelected = this.leftDate && this.rightDate;\n      var isReadyToGenerateDiff = this.location && datesSelected && this.diffStyle !== undefined;\n      return /*#__PURE__*/_react[\"default\"].createElement(_Text[\"default\"], {\n        large: true\n      }, /*#__PURE__*/_react[\"default\"].createElement(DiffAccordion, {\n        viewState: viewState,\n        t: t\n      }, /*#__PURE__*/_react[\"default\"].createElement(MainPanel, {\n        isMapFullScreen: viewState.isMapFullScreen,\n        styledMaxHeight: \"calc(100vh - \".concat(viewState.bottomDockHeight, \"px - 150px)\")\n      }, isShowingDiff && /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(_Box[\"default\"], {\n        centered: true,\n        left: true\n      }, /*#__PURE__*/_react[\"default\"].createElement(_StyledBackButton, {\n        transparentBg: true,\n        onClick: this.resetTool,\n        $_css: theme.textLight,\n        $_css2: theme.textLight\n      }, /*#__PURE__*/_react[\"default\"].createElement(_Box.BoxSpan, {\n        centered: true\n      }, /*#__PURE__*/_react[\"default\"].createElement(_StyledStyledIcon, {\n        light: true,\n        styledWidth: \"16px\",\n        glyph: _Icon.GLYPHS.arrowDown\n      }), /*#__PURE__*/_react[\"default\"].createElement(_Text.TextSpan, {\n        noFontSize: true\n      }, t(\"general.back\"))))), /*#__PURE__*/_react[\"default\"].createElement(_Spacing[\"default\"], {\n        bottom: 3\n      }), /*#__PURE__*/_react[\"default\"].createElement(_Text[\"default\"], {\n        medium: true,\n        textLight: true\n      }, t(\"diffTool.differenceResultsTitle\")), /*#__PURE__*/_react[\"default\"].createElement(_Spacing[\"default\"], {\n        bottom: 2\n      })), /*#__PURE__*/_react[\"default\"].createElement(_Text[\"default\"], {\n        textLight: true\n      }, t(\"diffTool.instructions.paneDescription\")), /*#__PURE__*/_react[\"default\"].createElement(_Spacing[\"default\"], {\n        bottom: 3\n      }), /*#__PURE__*/_react[\"default\"].createElement(LocationAndDatesDisplayBox, null, /*#__PURE__*/_react[\"default\"].createElement(_Box[\"default\"], null, /*#__PURE__*/_react[\"default\"].createElement(_Text[\"default\"], {\n        medium: true\n      }, t(\"diffTool.labels.area\"), \":\"), /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, /*#__PURE__*/_react[\"default\"].createElement(_Text[\"default\"], {\n        medium: true,\n        textLightDimmed: !this.location\n      }, this.location ? t(\"diffTool.locationDisplay.locationSelected.title\") : t(\"diffTool.locationDisplay.noLocationSelected.title\")), /*#__PURE__*/_react[\"default\"].createElement(_Text[\"default\"], {\n        light: true,\n        textLight: true,\n        small: true\n      }, this.location ? t(\"diffTool.locationDisplay.locationSelected.description\") : t(\"diffTool.locationDisplay.noLocationSelected.description\")))), /*#__PURE__*/_react[\"default\"].createElement(_Box[\"default\"], null, /*#__PURE__*/_react[\"default\"].createElement(_Text[\"default\"], {\n        medium: true\n      }, t(\"diffTool.labels.dates\"), \":\"), /*#__PURE__*/_react[\"default\"].createElement(_Box[\"default\"], {\n        column: true,\n        alignItemsFlexStart: true\n      }, this.leftDate && /*#__PURE__*/_react[\"default\"].createElement(_Text[\"default\"], {\n        large: true\n      }, \"(A) \", dateFormat(this.leftDate, \"dd/mm/yyyy\")), !this.leftDate && /*#__PURE__*/_react[\"default\"].createElement(_Button.RawButton, {\n        ref: this.openLeftDatePickerButton\n      }, /*#__PURE__*/_react[\"default\"].createElement(_Text.TextSpan, {\n        isLink: true,\n        small: true\n      }, t(\"diffTool.instructions.setDateA\"))), /*#__PURE__*/_react[\"default\"].createElement(_Spacing[\"default\"], {\n        bottom: 1\n      }), this.rightDate && /*#__PURE__*/_react[\"default\"].createElement(_Text[\"default\"], {\n        large: true\n      }, \"(B) \", dateFormat(this.rightDate, \"dd/mm/yyyy\")), !this.rightDate && /*#__PURE__*/_react[\"default\"].createElement(_Button.RawButton, {\n        ref: this.openRightDatePickerButton\n      }, /*#__PURE__*/_react[\"default\"].createElement(_Text.TextSpan, {\n        isLink: true,\n        small: true\n      }, t(\"diffTool.instructions.setDateB\"))), isShowingDiff === false && this.leftDate && this.rightDate && /*#__PURE__*/_react[\"default\"].createElement(_Button.RawButton, {\n        onClick: this.unsetDates\n      }, /*#__PURE__*/_react[\"default\"].createElement(_Text.TextSpan, {\n        isLink: true,\n        small: true\n      }, t(\"diffTool.instructions.changeDates\")))))), !isShowingDiff && /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(_Spacing[\"default\"], {\n        bottom: 4\n      }), /*#__PURE__*/_react[\"default\"].createElement(Selector, {\n        viewState: viewState,\n        value: sourceItem.uniqueId,\n        onChange: this.changeSourceItem,\n        label: t(\"diffTool.labels.sourceDataset\")\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"option\", {\n        disabled: true\n      }, \"Select source item\"), this.diffableItemsInWorkbench.map(function (item) {\n        return /*#__PURE__*/_react[\"default\"].createElement(\"option\", {\n          key: item.uniqueId,\n          value: item.uniqueId\n        }, item.name);\n      }))), !isShowingDiff && /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(_Spacing[\"default\"], {\n        bottom: 4\n      }), /*#__PURE__*/_react[\"default\"].createElement(Selector, {\n        viewState: viewState,\n        spacingBottom: true,\n        value: this.previewStyle,\n        onChange: this.changePreviewStyle,\n        label: t(\"diffTool.labels.previewStyle\")\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"option\", {\n        disabled: true,\n        value: \"\"\n      }, t(\"diffTool.choosePreview\")), (_this$diffItem$styleS3 = this.diffItem.styleSelectableDimensions) === null || _this$diffItem$styleS3 === void 0 ? void 0 : (_this$diffItem$styleS4 = _this$diffItem$styleS3[0]) === null || _this$diffItem$styleS4 === void 0 ? void 0 : (_this$diffItem$styleS5 = _this$diffItem$styleS4.options) === null || _this$diffItem$styleS5 === void 0 ? void 0 : _this$diffItem$styleS5.map(function (style) {\n        return /*#__PURE__*/_react[\"default\"].createElement(\"option\", {\n          key: style.id,\n          value: style.id\n        }, style.name);\n      })), this.previewLegendUrl && /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(_Spacing[\"default\"], {\n        bottom: 2\n      }), /*#__PURE__*/_react[\"default\"].createElement(LegendImage, {\n        width: \"100%\",\n        src: this.previewLegendUrl\n      }))), /*#__PURE__*/_react[\"default\"].createElement(_Spacing[\"default\"], {\n        bottom: 2\n      }), /*#__PURE__*/_react[\"default\"].createElement(Selector, {\n        viewState: viewState,\n        value: this.diffStyle || \"\",\n        onChange: this.changeDiffStyle,\n        label: t(\"diffTool.labels.differenceOutput\")\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"option\", {\n        disabled: true,\n        value: \"\"\n      }, t(\"diffTool.chooseDifference\")), this.availableDiffStyles.map(function (style) {\n        return /*#__PURE__*/_react[\"default\"].createElement(\"option\", {\n          key: style.id,\n          value: style.id\n        }, style.name);\n      })), isShowingDiff && this.diffLegendUrl && /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(LegendImage, {\n        width: \"100%\",\n        src: this.diffLegendUrl\n      }), /*#__PURE__*/_react[\"default\"].createElement(_Spacing[\"default\"], {\n        bottom: 4\n      })), !isShowingDiff && /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(_Spacing[\"default\"], {\n        bottom: 4\n      }), /*#__PURE__*/_react[\"default\"].createElement(GenerateButton, {\n        onClick: this.generateDiff,\n        disabled: !isReadyToGenerateDiff,\n        \"aria-describedby\": \"TJSDifferenceDisabledButtonPrompt\"\n      }, /*#__PURE__*/_react[\"default\"].createElement(_Text.TextSpan, {\n        large: true\n      }, t(\"diffTool.labels.generateDiffButtonText\"))), !isReadyToGenerateDiff && /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(_Spacing[\"default\"], {\n        bottom: 3\n      }), /*#__PURE__*/_react[\"default\"].createElement(_Text[\"default\"], {\n        small: true,\n        light: true,\n        textLight: true,\n        id: \"TJSDifferenceDisabledButtonPrompt\"\n      }, t(\"diffTool.labels.disabledButtonPrompt\")), /*#__PURE__*/_react[\"default\"].createElement(_Spacing[\"default\"], {\n        bottom: 4\n      }))))), isShowingDiff && /*#__PURE__*/_react[\"default\"].createElement(CloseDifferenceButton, {\n        primary: true,\n        rounded: true,\n        textProps: {\n          semiBold: true,\n          extraLarge: true\n        },\n        theme: theme,\n        activeStyles: true,\n        onClick: this.resetTool,\n        renderIcon: function renderIcon() {\n          return /*#__PURE__*/_react[\"default\"].createElement(_Icon.StyledIcon, {\n            light: true,\n            styledWidth: \"13px\",\n            glyph: _Icon.GLYPHS.closeLight\n          });\n        },\n        iconProps: {\n          css: \"margin-right: 10px;\"\n        }\n      }, \"Close\"), !isShowingDiff && /*#__PURE__*/_react[\"default\"].createElement(_LocationPicker[\"default\"], {\n        terria: terria,\n        location: this.location,\n        onPicking: this.onUserPickingLocation,\n        onPicked: this.onUserPickLocation\n      }), !isShowingDiff && /*#__PURE__*/_reactDom[\"default\"].createPortal(\n      /*#__PURE__*/\n      // Bottom Panel\n      _react[\"default\"].createElement(_Box[\"default\"], {\n        centered: true,\n        fullWidth: true,\n        flexWrap: true,\n        backgroundColor: theme.dark\n      }, /*#__PURE__*/_react[\"default\"].createElement(_DatePicker[\"default\"], {\n        heading: t(\"diffTool.labels.dateComparisonA\"),\n        item: this.props.leftItem,\n        externalOpenButton: this.openLeftDatePickerButton,\n        onDateSet: function onDateSet() {\n          return _this8.showItem(_this8.props.leftItem);\n        }\n      }), /*#__PURE__*/_react[\"default\"].createElement(AreaFilterSelection, {\n        t: t,\n        location: this.location,\n        isPickingNewLocation: this._isPickingNewLocation\n      }), /*#__PURE__*/_react[\"default\"].createElement(_DatePicker[\"default\"], {\n        heading: t(\"diffTool.labels.dateComparisonB\"),\n        item: this.props.rightItem,\n        externalOpenButton: this.openRightDatePickerButton,\n        onDateSet: function onDateSet() {\n          return _this8.showItem(_this8.props.rightItem);\n        }\n      })), document.getElementById(\"TJS-BottomDockLastPortal\")));\n    }\n  }]);\n\n  return Main;\n}(_react[\"default\"].Component), (_descriptor4 = _applyDecoratedDescriptor(_class5.prototype, \"location\", [_mobx.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor5 = _applyDecoratedDescriptor(_class5.prototype, \"_locationPickError\", [_mobx.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _descriptor6 = _applyDecoratedDescriptor(_class5.prototype, \"_isPickingNewLocation\", [_mobx.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _applyDecoratedDescriptor(_class5.prototype, \"locationPickerMessages\", [_mobx.computed], Object.getOwnPropertyDescriptor(_class5.prototype, \"locationPickerMessages\"), _class5.prototype), _applyDecoratedDescriptor(_class5.prototype, \"diffItem\", [_mobx.computed], Object.getOwnPropertyDescriptor(_class5.prototype, \"diffItem\"), _class5.prototype), _applyDecoratedDescriptor(_class5.prototype, \"diffItemName\", [_mobx.computed], Object.getOwnPropertyDescriptor(_class5.prototype, \"diffItemName\"), _class5.prototype), _applyDecoratedDescriptor(_class5.prototype, \"diffableItemsInWorkbench\", [_mobx.computed], Object.getOwnPropertyDescriptor(_class5.prototype, \"diffableItemsInWorkbench\"), _class5.prototype), _applyDecoratedDescriptor(_class5.prototype, \"previewStyle\", [_mobx.computed], Object.getOwnPropertyDescriptor(_class5.prototype, \"previewStyle\"), _class5.prototype), _applyDecoratedDescriptor(_class5.prototype, \"diffStyle\", [_mobx.computed], Object.getOwnPropertyDescriptor(_class5.prototype, \"diffStyle\"), _class5.prototype), _applyDecoratedDescriptor(_class5.prototype, \"availableDiffStyles\", [_mobx.computed], Object.getOwnPropertyDescriptor(_class5.prototype, \"availableDiffStyles\"), _class5.prototype), _applyDecoratedDescriptor(_class5.prototype, \"leftDate\", [_mobx.computed], Object.getOwnPropertyDescriptor(_class5.prototype, \"leftDate\"), _class5.prototype), _applyDecoratedDescriptor(_class5.prototype, \"rightDate\", [_mobx.computed], Object.getOwnPropertyDescriptor(_class5.prototype, \"rightDate\"), _class5.prototype), _applyDecoratedDescriptor(_class5.prototype, \"diffLegendUrl\", [_mobx.computed], Object.getOwnPropertyDescriptor(_class5.prototype, \"diffLegendUrl\"), _class5.prototype), _applyDecoratedDescriptor(_class5.prototype, \"previewLegendUrl\", [_mobx.computed], Object.getOwnPropertyDescriptor(_class5.prototype, \"previewLegendUrl\"), _class5.prototype), _applyDecoratedDescriptor(_class5.prototype, \"showItem\", [_mobx.action], Object.getOwnPropertyDescriptor(_class5.prototype, \"showItem\"), _class5.prototype), _applyDecoratedDescriptor(_class5.prototype, \"hideItem\", [_mobx.action], Object.getOwnPropertyDescriptor(_class5.prototype, \"hideItem\"), _class5.prototype), _applyDecoratedDescriptor(_class5.prototype, \"changeSourceItem\", [_dec2], Object.getOwnPropertyDescriptor(_class5.prototype, \"changeSourceItem\"), _class5.prototype), _applyDecoratedDescriptor(_class5.prototype, \"changePreviewStyle\", [_dec3], Object.getOwnPropertyDescriptor(_class5.prototype, \"changePreviewStyle\"), _class5.prototype), _applyDecoratedDescriptor(_class5.prototype, \"changeDiffStyle\", [_dec4], Object.getOwnPropertyDescriptor(_class5.prototype, \"changeDiffStyle\"), _class5.prototype), _applyDecoratedDescriptor(_class5.prototype, \"onUserPickingLocation\", [_dec5], Object.getOwnPropertyDescriptor(_class5.prototype, \"onUserPickingLocation\"), _class5.prototype), _applyDecoratedDescriptor(_class5.prototype, \"onUserPickLocation\", [_dec6], Object.getOwnPropertyDescriptor(_class5.prototype, \"onUserPickLocation\"), _class5.prototype), _applyDecoratedDescriptor(_class5.prototype, \"unsetDates\", [_dec7], Object.getOwnPropertyDescriptor(_class5.prototype, \"unsetDates\"), _class5.prototype), _applyDecoratedDescriptor(_class5.prototype, \"generateDiff\", [_dec8], Object.getOwnPropertyDescriptor(_class5.prototype, \"generateDiff\"), _class5.prototype), _applyDecoratedDescriptor(_class5.prototype, \"resetTool\", [_dec9], Object.getOwnPropertyDescriptor(_class5.prototype, \"resetTool\"), _class5.prototype), _applyDecoratedDescriptor(_class5.prototype, \"setLocationFromActiveSearch\", [_mobx.action], Object.getOwnPropertyDescriptor(_class5.prototype, \"setLocationFromActiveSearch\"), _class5.prototype)), _class5)) || _class4);\nvar DiffAccordionToggle = (0, _styledComponents[\"default\"])(_Box[\"default\"]).withConfig({\n  displayName: \"DiffTool__DiffAccordionToggle\",\n  componentId: \"sc-3vyhxu-0\"\n})([\"\", \"\"], function (_ref) {\n  var theme = _ref.theme;\n  return theme.borderRadiusTop(theme.radius40Button);\n});\n\nvar DiffAccordion = function DiffAccordion(props) {\n  var _useState = (0, _react.useState)(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      showChildren = _useState2[0],\n      setShowChildren = _useState2[1];\n\n  var t = props.t,\n      viewState = props.viewState;\n  var theme = (0, _styledComponents.useTheme)();\n  return /*#__PURE__*/_react[\"default\"].createElement(DiffAccordionWrapper, {\n    isMapFullScreen: viewState.isMapFullScreen,\n    column: true\n  }, /*#__PURE__*/_react[\"default\"].createElement(DiffAccordionToggle, {\n    paddedVertically: true,\n    paddedHorizontally: 2,\n    centered: true,\n    justifySpaceBetween: true,\n    backgroundColor: theme.colorSecondary\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Box[\"default\"], {\n    centered: true\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Icon.StyledIcon, {\n    styledWidth: \"20px\",\n    light: true,\n    glyph: _Icon.GLYPHS.difference\n  }), /*#__PURE__*/_react[\"default\"].createElement(_Spacing[\"default\"], {\n    right: 1\n  }), /*#__PURE__*/_react[\"default\"].createElement(_Text[\"default\"], {\n    textLight: true,\n    semiBold: true // font-size is non standard with what we have so far in terria,\n    // lineheight as well to hit nonstandard paddings\n    ,\n    styledFontSize: \"17px\",\n    styledLineHeight: \"30px\"\n  }, t(\"diffTool.title\"))), /*#__PURE__*/_react[\"default\"].createElement(_StyledBox, {\n    centered: true,\n    $_css3: \"margin-right:-5px;\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Button.RawButton, {\n    onClick: function onClick() {\n      return viewState.closeTool();\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Text.TextSpan, {\n    textLight: true,\n    small: true,\n    semiBold: true,\n    uppercase: true\n  }, t(\"diffTool.exit\"))), /*#__PURE__*/_react[\"default\"].createElement(_Spacing[\"default\"], {\n    right: 4\n  }), /*#__PURE__*/_react[\"default\"].createElement(_Button.RawButton, {\n    onClick: function onClick() {\n      return setShowChildren(!showChildren);\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Box.BoxSpan, {\n    paddedRatio: 1,\n    centered: true\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Icon.StyledIcon, {\n    styledWidth: \"12px\",\n    light: true,\n    glyph: showChildren ? _Icon.GLYPHS.opened : _Icon.GLYPHS.closed\n  }))))), showChildren && props.children);\n};\n\nvar DiffAccordionWrapper = (0, _styledComponents[\"default\"])(_Box[\"default\"]).attrs({\n  column: true,\n  position: \"absolute\",\n  styledWidth: \"340px\" // charcoalGreyBg: true\n\n}).withConfig({\n  displayName: \"DiffTool__DiffAccordionWrapper\",\n  componentId: \"sc-3vyhxu-1\"\n})([\"top:70px;left:0px;min-height:220px;margin-left:\", \"px;transition:margin-left 0.25s;\"], function (props) {\n  return props.isMapFullScreen ? 16 : parseInt(props.theme.workbenchWidth) + 40;\n});\nvar MainPanel = (0, _styledComponents[\"default\"])(_Box[\"default\"]).attrs({\n  column: true,\n  overflowY: \"auto\",\n  paddedRatio: 2\n}).withConfig({\n  displayName: \"DiffTool__MainPanel\",\n  componentId: \"sc-3vyhxu-2\"\n})([\"\", \" background-color:\", \";\"], function (_ref2) {\n  var theme = _ref2.theme;\n  return theme.borderRadiusBottom(theme.radius40Button);\n}, function (p) {\n  return p.theme.darkWithOverlay;\n});\nvar BackButton = (0, _styledComponents[\"default\"])(_Button[\"default\"]).attrs({\n  secondary: true\n}).withConfig({\n  displayName: \"DiffTool__BackButton\",\n  componentId: \"sc-3vyhxu-3\"\n})([\"\"]);\n\nvar _StyledBackButton = (0, _styledComponents[\"default\"])(BackButton).withConfig({\n  displayName: \"DiffTool___StyledBackButton\",\n  componentId: \"sc-3vyhxu-4\"\n})([\"color:\", \";border-color:\", \";\"], function (p) {\n  return p.$_css;\n}, function (p) {\n  return p.$_css2;\n});\n\nvar CloseDifferenceButton = (0, _styledComponents[\"default\"])(_Button[\"default\"]).withConfig({\n  displayName: \"DiffTool__CloseDifferenceButton\",\n  componentId: \"sc-3vyhxu-5\"\n})([\"position:absolute;left:50%;transform:translateX(-50%);top:18px;padding:0 20px;\"]);\nvar GenerateButton = (0, _styledComponents[\"default\"])(_Button[\"default\"]).attrs({\n  primary: true,\n  splitter: true,\n  fullWidth: true\n}).withConfig({\n  displayName: \"DiffTool__GenerateButton\",\n  componentId: \"sc-3vyhxu-6\"\n})([\"\"]);\n\nvar Selector = function Selector(props) {\n  return /*#__PURE__*/_react[\"default\"].createElement(_Box[\"default\"], {\n    fullWidth: true,\n    column: true\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"label\", null, /*#__PURE__*/_react[\"default\"].createElement(_StyledText, {\n    textLight: true,\n    $_css4: \"p {margin: 0;}\"\n  }, (0, _parseCustomMarkdownToReact.parseCustomMarkdownToReactWithOptions)(\"\".concat(props.label, \":\"), {\n    injectTermsAsTooltips: true,\n    tooltipTerms: props.viewState.terria.configParameters.helpContentTerms\n  })), /*#__PURE__*/_react[\"default\"].createElement(_Spacing[\"default\"], {\n    bottom: 1\n  }), /*#__PURE__*/_react[\"default\"].createElement(_Select[\"default\"], props, props.children), props.spacingBottom && /*#__PURE__*/_react[\"default\"].createElement(_Spacing[\"default\"], {\n    bottom: 2\n  })));\n};\n\nvar AreaFilterSelection = function AreaFilterSelection(props) {\n  var t = props.t,\n      location = props.location,\n      isPickingNewLocation = props.isPickingNewLocation;\n  var locationText = \"-\";\n\n  if (location) {\n    var _prettifyCoordinates = (0, _prettifyCoordinates2[\"default\"])(location.longitude, location.latitude, {\n      digits: 2\n    }),\n        longitude = _prettifyCoordinates.longitude,\n        latitude = _prettifyCoordinates.latitude;\n\n    locationText = \"\".concat(longitude, \" \").concat(latitude);\n  }\n\n  return /*#__PURE__*/_react[\"default\"].createElement(_StyledBox2, {\n    column: true,\n    centered: true,\n    styledMinWidth: \"230px\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Box[\"default\"], {\n    centered: true\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Icon.StyledIcon, {\n    light: true,\n    styledWidth: \"16px\",\n    glyph: _Icon.GLYPHS.location2\n  }), /*#__PURE__*/_react[\"default\"].createElement(_Spacing[\"default\"], {\n    right: 2\n  }), /*#__PURE__*/_react[\"default\"].createElement(_Text[\"default\"], {\n    textLight: true,\n    extraLarge: true\n  }, t(\"diffTool.labels.areaFilterSelection\"))), /*#__PURE__*/_react[\"default\"].createElement(_Spacing[\"default\"], {\n    bottom: 3\n  }), /*#__PURE__*/_react[\"default\"].createElement(_Box[\"default\"], {\n    styledMinHeight: \"40px\"\n  }, isPickingNewLocation ? /*#__PURE__*/_react[\"default\"].createElement(_StyledText2, {\n    textLight: true,\n    extraExtraLarge: true,\n    bold: true // Using legacy Loader.jsx means we override at a higher level to inherit\n    // this fills tyle\n\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Loader[\"default\"], {\n    light: true,\n    message: \"Querying \".concat(location ? \"new\" : \"\", \" position...\")\n  })) : /*#__PURE__*/_react[\"default\"].createElement(_Text[\"default\"], {\n    textLight: true,\n    bold: true,\n    heading: true,\n    textAlignCenter: true\n  }, locationText)));\n};\n\nvar LocationAndDatesDisplayBox = (0, _styledComponents[\"default\"])(_Box[\"default\"]).attrs({\n  column: true,\n  charcoalGreyBg: true\n}).withConfig({\n  displayName: \"DiffTool__LocationAndDatesDisplayBox\",\n  componentId: \"sc-3vyhxu-7\"\n})([\"color:\", \";padding:15px;> \", \":first-child{margin-bottom:13px;}> div > div:first-child{margin-right:5px;min-width:50px;}\"], function (p) {\n  return p.theme.textLight;\n}, _Box[\"default\"]);\n\nvar LegendImage = function LegendImage(props) {\n  return /*#__PURE__*/_react[\"default\"].createElement(\"img\", _extends({}, props, {\n    // Show the legend only if it loads successfully, so we start out hidden\n    style: {\n      display: \"none\",\n      marginTop: \"4px\"\n    } // @ts-ignore\n    ,\n    onLoad: function onLoad(e) {\n      return e.target.style.display = \"block\";\n    } // @ts-ignore\n    ,\n    onError: function onError(e) {\n      return e.target.style.display = \"none\";\n    }\n  }));\n};\n\nfunction createSplitItem(_x, _x2) {\n  return _createSplitItem.apply(this, arguments);\n}\n/**\n * If the item has only one available diff style, auto-select it\n */\n\n\nfunction _createSplitItem() {\n  _createSplitItem = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(sourceItem, splitDirection) {\n    var terria, ref;\n    return regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            terria = sourceItem.terria;\n            ref = new _SplitItemReference[\"default\"]((0, _createGuid[\"default\"])(), terria);\n            ref.setTrait(_CommonStrata[\"default\"].user, \"splitSourceItemId\", sourceItem.uniqueId);\n            terria.addModel(ref);\n            _context3.next = 6;\n            return ref.loadReference();\n\n          case 6:\n            return _context3.abrupt(\"return\", (0, _mobx.runInAction)(function () {\n              var _newItem$styleSelecta, _newItem$styleSelecta2, _newItem$styleSelecta3;\n\n              if (ref.target === undefined) {\n                throw Error(\"failed to split item\");\n              }\n\n              var newItem = ref.target;\n              newItem.setTrait(_CommonStrata[\"default\"].user, \"show\", true);\n              newItem.setTrait(_CommonStrata[\"default\"].user, \"splitDirection\", splitDirection);\n              newItem.setTrait(_CommonStrata[\"default\"].user, \"currentTime\", null);\n              newItem.setTrait(_CommonStrata[\"default\"].user, \"initialTimeSource\", \"none\");\n\n              if (hasOpacity(newItem)) {\n                // We want to show the item on the map only after date selection. At the\n                // same time we cannot set `show` to false because if we\n                // do so, date picking which relies on feature picking, will not work. So\n                // we simply set the opacity of the item to 0.\n                newItem.setTrait(_CommonStrata[\"default\"].user, \"opacity\", 0);\n              }\n\n              setDefaultDiffStyle(newItem); // Set the default style to true color style if it exists\n\n              // Set the default style to true color style if it exists\n              var trueColor = (_newItem$styleSelecta = newItem.styleSelectableDimensions) === null || _newItem$styleSelecta === void 0 ? void 0 : (_newItem$styleSelecta2 = _newItem$styleSelecta[0]) === null || _newItem$styleSelecta2 === void 0 ? void 0 : (_newItem$styleSelecta3 = _newItem$styleSelecta2.options) === null || _newItem$styleSelecta3 === void 0 ? void 0 : _newItem$styleSelecta3.find(function (style) {\n                return (0, _isDefined[\"default\"])(style.name) && style.name.search(/true/i) >= 0;\n              });\n\n              if (trueColor !== null && trueColor !== void 0 && trueColor.id) {\n                var _newItem$styleSelecta4, _newItem$styleSelecta5;\n\n                (_newItem$styleSelecta4 = newItem.styleSelectableDimensions) === null || _newItem$styleSelecta4 === void 0 ? void 0 : (_newItem$styleSelecta5 = _newItem$styleSelecta4[0]) === null || _newItem$styleSelecta5 === void 0 ? void 0 : _newItem$styleSelecta5.setDimensionValue(_CommonStrata[\"default\"].user, trueColor.id);\n              }\n\n              terria.overlays.add(newItem);\n              return newItem;\n            }));\n\n          case 7:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _createSplitItem.apply(this, arguments);\n}\n\nfunction setDefaultDiffStyle(item) {\n  if (item.diffStyleId !== undefined) {\n    return;\n  }\n\n  var availableStyles = (0, _filterOutUndefined[\"default\"])(item.availableDiffStyles.map(function (diffStyleId) {\n    var _item$styleSelectable, _item$styleSelectable2, _item$styleSelectable3;\n\n    return (_item$styleSelectable = item.styleSelectableDimensions) === null || _item$styleSelectable === void 0 ? void 0 : (_item$styleSelectable2 = _item$styleSelectable[0]) === null || _item$styleSelectable2 === void 0 ? void 0 : (_item$styleSelectable3 = _item$styleSelectable2.options) === null || _item$styleSelectable3 === void 0 ? void 0 : _item$styleSelectable3.find(function (style) {\n      return style.id === diffStyleId;\n    });\n  }));\n\n  if (availableStyles.length === 1) {\n    item.setTrait(_CommonStrata[\"default\"].user, \"diffStyleId\", availableStyles[0].id);\n  }\n}\n\nfunction removeSplitItem(item) {\n  var terria = item.terria;\n  terria.overlays.remove(item);\n\n  if (item.sourceReference && terria.workbench.contains(item) === false) {\n    terria.removeModelReferences(item.sourceReference);\n  }\n}\n\nfunction doesFeatureBelongToItem(feature, item) {\n  var _feature$imageryLayer;\n\n  if (!_MappableMixin[\"default\"].isMixedInto(item)) return false;\n  var imageryProvider = (_feature$imageryLayer = feature.imageryLayer) === null || _feature$imageryLayer === void 0 ? void 0 : _feature$imageryLayer.imageryProvider;\n  if (imageryProvider === undefined) return false;\n  return item.mapItems.find(function (m) {\n    return _MappableMixin.ImageryParts.is(m) && m.imageryProvider === imageryProvider;\n  }) !== undefined;\n}\n\nfunction setTimeFilterFromLocation(item, location, im) {\n  var carto = new _Cartographic[\"default\"](_Math[\"default\"].toRadians(location.longitude), _Math[\"default\"].toRadians(location.latitude)); // We just need to set this to a high enough level supported by the service\n\n  var level = 30;\n  var tile = im.tilingScheme.positionToTileXY(carto, level);\n  return item.setTimeFilterFromLocation({\n    position: {\n      latitude: location.latitude,\n      longitude: location.longitude,\n      height: location.height\n    },\n    tileCoords: {\n      x: tile.x,\n      y: tile.y,\n      level: level\n    }\n  });\n}\n\nfunction hasOpacity(model) {\n  return (0, _hasTraits[\"default\"])(model, _ImageryProviderTraits[\"default\"], \"opacity\");\n}\n\nvar _default = (0, _hoistNonReactStatics[\"default\"])((0, _reactI18next.withTranslation)()((0, _styledComponents.withTheme)(DiffTool)), DiffTool);\n\nexports[\"default\"] = _default;\n\nvar _StyledStyledIcon = (0, _styledComponents[\"default\"])(_Icon.StyledIcon).withConfig({\n  displayName: \"DiffTool___StyledStyledIcon\",\n  componentId: \"sc-3vyhxu-8\"\n})([\"transform:rotate(90deg);\"]);\n\nvar _StyledBox = (0, _styledComponents[\"default\"])(_Box[\"default\"]).withConfig({\n  displayName: \"DiffTool___StyledBox\",\n  componentId: \"sc-3vyhxu-9\"\n})([\"\", \"\"], function (p) {\n  return p.$_css3;\n});\n\nvar _StyledText = (0, _styledComponents[\"default\"])(_Text[\"default\"]).withConfig({\n  displayName: \"DiffTool___StyledText\",\n  componentId: \"sc-3vyhxu-10\"\n})([\"\", \"\"], function (p) {\n  return p.$_css4;\n});\n\nvar _StyledBox2 = (0, _styledComponents[\"default\"])(_Box[\"default\"]).withConfig({\n  displayName: \"DiffTool___StyledBox2\",\n  componentId: \"sc-3vyhxu-11\"\n})([\"@media (max-width:\", \"px){width:100%;}\"], function (props) {\n  return props.theme.md;\n});\n\nvar _StyledText2 = (0, _styledComponents[\"default\"])(_Text[\"default\"]).withConfig({\n  displayName: \"DiffTool___StyledText2\",\n  componentId: \"sc-3vyhxu-12\"\n})([\"fill:\", \";\"], function (_ref3) {\n  var theme = _ref3.theme;\n  return theme.textLight;\n});","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nrequire(\"core-js/modules/es.array.for-each.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"core-js/modules/es.object.keys.js\");\n\nrequire(\"core-js/modules/es.array.reduce.js\");\n\nrequire(\"core-js/modules/es.array.reverse.js\");\n\nrequire(\"core-js/modules/es.array.slice.js\");\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.object.set-prototype-of.js\");\n\nrequire(\"core-js/modules/es.object.get-prototype-of.js\");\n\nrequire(\"core-js/modules/es.reflect.construct.js\");\n\nrequire(\"core-js/modules/es.object.create.js\");\n\nrequire(\"core-js/modules/es.array.iterator.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/es.weak-map.js\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\n\nrequire(\"core-js/modules/es.symbol.js\");\n\nrequire(\"core-js/modules/es.symbol.description.js\");\n\nrequire(\"core-js/modules/es.symbol.iterator.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nrequire(\"core-js/modules/es.date.to-iso-string.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _mobx = require(\"mobx\");\n\nvar _mobxReact = require(\"mobx-react\");\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactI18next = require(\"react-i18next\");\n\nvar _JulianDate = _interopRequireDefault(require(\"terriajs-cesium/Source/Core/JulianDate\"));\n\nvar _CommonStrata = _interopRequireDefault(require(\"../../../Models/Definition/CommonStrata\"));\n\nvar _DateFormats = require(\"../../BottomDock/Timeline/DateFormats\");\n\nvar _Icon = _interopRequireWildcard(require(\"../../../Styled/Icon\"));\n\nvar _DateTimePicker = _interopRequireDefault(require(\"../../BottomDock/Timeline/DateTimePicker\"));\n\nvar _Text = _interopRequireWildcard(require(\"../../../Styled/Text\"));\n\nvar _Box = _interopRequireDefault(require(\"../../../Styled/Box\"));\n\nvar _Button = _interopRequireDefault(require(\"../../../Styled/Button\"));\n\nvar _Spacing = _interopRequireDefault(require(\"../../../Styled/Spacing\"));\n\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _class, _class2, _descriptor;\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _initializerDefineProperty(target, property, descriptor, context) { if (!descriptor) return; Object.defineProperty(target, property, { enumerable: descriptor.enumerable, configurable: descriptor.configurable, writable: descriptor.writable, value: descriptor.initializer ? descriptor.initializer.call(context) : void 0 }); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\nfunction _initializerWarningHelper(descriptor, context) { throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and runs after the decorators transform.'); }\n\nvar dateFormat = require(\"dateformat\");\n\nvar DatePicker = (_dec = _mobx.action.bound, _dec2 = _mobx.action.bound, _dec3 = _mobx.action.bound, _dec4 = _mobx.action.bound, _dec5 = _mobx.action.bound, _dec6 = _mobx.action.bound, (0, _mobxReact.observer)(_class = (_class2 = /*#__PURE__*/function (_React$Component) {\n  _inherits(DatePicker, _React$Component);\n\n  var _super = _createSuper(DatePicker);\n\n  function DatePicker(props) {\n    var _this;\n\n    _classCallCheck(this, DatePicker);\n\n    _this = _super.call(this, props);\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"isOpen\", _descriptor, _assertThisInitialized(_this));\n\n    (0, _mobx.makeObservable)(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(DatePicker, [{\n    key: \"currentDate\",\n    get: function get() {\n      var date = this.props.item.currentDiscreteJulianDate;\n      return date && _JulianDate[\"default\"].toDate(date);\n    }\n  }, {\n    key: \"formattedCurrentDate\",\n    get: function get() {\n      if (this.currentDate === undefined) {\n        return;\n      }\n\n      var dateFormatting = undefined; // TODO\n\n      var formattedDate = dateFormatting !== undefined ? dateFormat(this.currentDate, dateFormatting) : (0, _DateFormats.formatDateTime)(this.currentDate);\n      return formattedDate;\n    }\n  }, {\n    key: \"toggleOpen\",\n    value: function toggleOpen(e) {\n      this.isOpen = !this.isOpen; // stopPropagation is required to prevent the datetime picker popup from closing when\n      // the date button is clicked\n\n      e.stopPropagation();\n    }\n  }, {\n    key: \"setIsOpen\",\n    value: function setIsOpen(isOpen) {\n      this.isOpen = isOpen;\n    }\n  }, {\n    key: \"changeCurrentDate\",\n    value: function changeCurrentDate(date) {\n      this.props.item.setTrait(_CommonStrata[\"default\"].user, \"currentTime\", date.toISOString());\n      this.props.onDateSet();\n    }\n  }, {\n    key: \"moveToPreviousDate\",\n    value: function moveToPreviousDate() {\n      this.props.item.moveToPreviousDiscreteTime(_CommonStrata[\"default\"].user);\n      this.props.onDateSet();\n    }\n  }, {\n    key: \"moveToNextDate\",\n    value: function moveToNextDate() {\n      this.props.item.moveToNextDiscreteTime(_CommonStrata[\"default\"].user);\n      this.props.onDateSet();\n    }\n  }, {\n    key: \"onClickExternalButton\",\n    value: function onClickExternalButton(event) {\n      this.setIsOpen(true); // stopPropagation is required to prevent the datetime picker popup from closing when\n      // the external button is clicked\n\n      event.stopPropagation();\n    }\n  }, {\n    key: \"registerExternalButtonClick\",\n    value: function registerExternalButtonClick() {\n      var _this$props$externalO;\n\n      (_this$props$externalO = this.props.externalOpenButton.current) === null || _this$props$externalO === void 0 ? void 0 : _this$props$externalO.addEventListener(\"click\", this.onClickExternalButton);\n    }\n  }, {\n    key: \"unregisterExternalButtonClick\",\n    value: function unregisterExternalButtonClick(externalOpenButton) {\n      var _externalOpenButton$c;\n\n      (_externalOpenButton$c = externalOpenButton.current) === null || _externalOpenButton$c === void 0 ? void 0 : _externalOpenButton$c.removeEventListener(\"click\", this.onClickExternalButton);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.registerExternalButtonClick();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      this.unregisterExternalButtonClick(prevProps.externalOpenButton);\n      this.registerExternalButtonClick();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.unregisterExternalButtonClick(this.props.externalOpenButton);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          heading = _this$props.heading,\n          item = _this$props.item,\n          t = _this$props.t;\n      return /*#__PURE__*/_react[\"default\"].createElement(_Box[\"default\"], {\n        column: true,\n        centered: true,\n        flex: 1\n      }, /*#__PURE__*/_react[\"default\"].createElement(_Spacing[\"default\"], {\n        bottom: 4\n      }), /*#__PURE__*/_react[\"default\"].createElement(_Box[\"default\"], {\n        centered: true\n      }, /*#__PURE__*/_react[\"default\"].createElement(_StyledStyledIcon, {\n        light: true,\n        styledWidth: \"21px\",\n        glyph: _Icon[\"default\"].GLYPHS.calendar2,\n        $_css: \"margin-top:-2px;\"\n      }), /*#__PURE__*/_react[\"default\"].createElement(_Spacing[\"default\"], {\n        right: 2\n      }), /*#__PURE__*/_react[\"default\"].createElement(_Text[\"default\"], {\n        textLight: true,\n        extraLarge: true\n      }, heading)), /*#__PURE__*/_react[\"default\"].createElement(_Spacing[\"default\"], {\n        bottom: 2\n      }), /*#__PURE__*/_react[\"default\"].createElement(_Box[\"default\"], null, /*#__PURE__*/_react[\"default\"].createElement(PrevButton, {\n        disabled: item.isPreviousDiscreteTimeAvailable === false,\n        title: t(\"diffTool.datePicker.previousDateTitle\"),\n        onClick: this.moveToPreviousDate\n      }), /*#__PURE__*/_react[\"default\"].createElement(DateButton, {\n        primary: true,\n        isOpen: this.isOpen,\n        onClick: this.toggleOpen,\n        title: t(\"diffTool.datePicker.dateButtonTitle\")\n      }, /*#__PURE__*/_react[\"default\"].createElement(_Text.TextSpan, {\n        extraLarge: true\n      }, this.formattedCurrentDate || \"-\")), /*#__PURE__*/_react[\"default\"].createElement(NextButton, {\n        disabled: item.isNextDiscreteTimeAvailable === false,\n        title: t(\"diffTool.datePicker.nextDateTitle\"),\n        onClick: this.moveToNextDate\n      })), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: {\n          display: this.isOpen ? \"block\" : \"none\",\n          position: \"absolute\"\n        }\n      }, /*#__PURE__*/_react[\"default\"].createElement(_DateTimePicker[\"default\"], {\n        currentDate: this.currentDate,\n        dates: this.props.item.objectifiedDates,\n        onChange: this.changeCurrentDate,\n        openDirection: \"none\",\n        isOpen: this.isOpen,\n        onOpen: function onOpen() {\n          return _this2.setIsOpen(true);\n        },\n        onClose: function onClose() {\n          return _this2.setIsOpen(false);\n        }\n      })), /*#__PURE__*/_react[\"default\"].createElement(_Spacing[\"default\"], {\n        bottom: 4\n      }));\n    }\n  }]);\n\n  return DatePicker;\n}(_react[\"default\"].Component), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"isOpen\", [_mobx.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _applyDecoratedDescriptor(_class2.prototype, \"currentDate\", [_mobx.computed], Object.getOwnPropertyDescriptor(_class2.prototype, \"currentDate\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"formattedCurrentDate\", [_mobx.computed], Object.getOwnPropertyDescriptor(_class2.prototype, \"formattedCurrentDate\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"toggleOpen\", [_dec], Object.getOwnPropertyDescriptor(_class2.prototype, \"toggleOpen\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"setIsOpen\", [_dec2], Object.getOwnPropertyDescriptor(_class2.prototype, \"setIsOpen\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"changeCurrentDate\", [_dec3], Object.getOwnPropertyDescriptor(_class2.prototype, \"changeCurrentDate\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"moveToPreviousDate\", [_dec4], Object.getOwnPropertyDescriptor(_class2.prototype, \"moveToPreviousDate\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"moveToNextDate\", [_dec5], Object.getOwnPropertyDescriptor(_class2.prototype, \"moveToNextDate\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"onClickExternalButton\", [_dec6], Object.getOwnPropertyDescriptor(_class2.prototype, \"onClickExternalButton\"), _class2.prototype)), _class2)) || _class);\nvar PagerButton = (0, _styledComponents[\"default\"])(_Button[\"default\"]).attrs({\n  iconProps: {\n    css: \"margin-right:0;\"\n  }\n}).withConfig({\n  displayName: \"DatePicker__PagerButton\",\n  componentId: \"sc-11kes1x-0\"\n})([\"cursor:pointer;background-color:\", \";width:40px;border:1px solid transparent;\", \" flex-direction:column;\"], function (props) {\n  return props.theme.colorPrimary;\n}, function (_ref) {\n  var theme = _ref.theme;\n  return theme.centerWithFlex();\n});\nvar PrevButton = (0, _styledComponents[\"default\"])(PagerButton).attrs({\n  renderIcon: function renderIcon() {\n    return /*#__PURE__*/_react[\"default\"].createElement(_StyledStyledIcon2, {\n      light: true,\n      styledWidth: \"15px\",\n      glyph: _Icon[\"default\"].GLYPHS.arrowDown\n    });\n  }\n}).withConfig({\n  displayName: \"DatePicker__PrevButton\",\n  componentId: \"sc-11kes1x-1\"\n})([\"\", \" margin-right:1px;\"], function (_ref2) {\n  var theme = _ref2.theme;\n  return theme.borderRadiusLeft(theme.radius40Button);\n});\nvar NextButton = (0, _styledComponents[\"default\"])(PagerButton).attrs({\n  renderIcon: function renderIcon() {\n    return /*#__PURE__*/_react[\"default\"].createElement(_StyledStyledIcon3, {\n      light: true,\n      styledWidth: \"15px\",\n      glyph: _Icon[\"default\"].GLYPHS.arrowDown\n    });\n  }\n}).withConfig({\n  displayName: \"DatePicker__NextButton\",\n  componentId: \"sc-11kes1x-2\"\n})([\"\", \" margin-left:1px;\"], function (_ref3) {\n  var theme = _ref3.theme;\n  return theme.borderRadiusRight(theme.radius40Button);\n});\nvar DateButton = (0, _styledComponents[\"default\"])(_Button[\"default\"]).withConfig({\n  displayName: \"DatePicker__DateButton\",\n  componentId: \"sc-11kes1x-3\"\n})([\"z-index:0;\", \";border-radius:0px;border:1px solid \", \";min-width:235px;@media (max-width:\", \"px){min-width:150px;}\"], function (props) {\n  return props.isOpen && \"z-index: 1000;\";\n}, function (props) {\n  return props.theme.colorPrimary;\n}, function (props) {\n  return props.theme.lg;\n});\n\nvar _default = (0, _reactI18next.withTranslation)()(DatePicker);\n\nexports[\"default\"] = _default;\n\nvar _StyledStyledIcon = (0, _styledComponents[\"default\"])(_Icon.StyledIcon).withConfig({\n  displayName: \"DatePicker___StyledStyledIcon\",\n  componentId: \"sc-11kes1x-4\"\n})([\"\", \"\"], function (p) {\n  return p.$_css;\n});\n\nvar _StyledStyledIcon2 = (0, _styledComponents[\"default\"])(_Icon.StyledIcon).withConfig({\n  displayName: \"DatePicker___StyledStyledIcon2\",\n  componentId: \"sc-11kes1x-5\"\n})([\"transform:rotate(90deg);\"]);\n\nvar _StyledStyledIcon3 = (0, _styledComponents[\"default\"])(_Icon.StyledIcon).withConfig({\n  displayName: \"DatePicker___StyledStyledIcon3\",\n  componentId: \"sc-11kes1x-6\"\n})([\"transform:rotate(270deg);\"]);","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nrequire(\"core-js/modules/es.symbol.js\");\n\nrequire(\"core-js/modules/es.symbol.description.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.symbol.iterator.js\");\n\nrequire(\"core-js/modules/es.array.iterator.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\n\nrequire(\"core-js/modules/es.function.name.js\");\n\nrequire(\"core-js/modules/es.array.from.js\");\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nrequire(\"core-js/modules/es.array.for-each.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"core-js/modules/es.object.keys.js\");\n\nrequire(\"core-js/modules/es.array.reduce.js\");\n\nrequire(\"core-js/modules/es.array.reverse.js\");\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.object.set-prototype-of.js\");\n\nrequire(\"core-js/modules/es.object.get-prototype-of.js\");\n\nrequire(\"core-js/modules/es.reflect.construct.js\");\n\nrequire(\"core-js/modules/es.object.create.js\");\n\nrequire(\"core-js/modules/es.weak-map.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nrequire(\"core-js/modules/es.array.slice.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\n\nrequire(\"core-js/modules/es.array.is-array.js\");\n\nvar _mobx = require(\"mobx\");\n\nvar _mobxReact = require(\"mobx-react\");\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _Ellipsoid = _interopRequireDefault(require(\"terriajs-cesium/Source/Core/Ellipsoid\"));\n\nvar _Math = _interopRequireDefault(require(\"terriajs-cesium/Source/Core/Math\"));\n\nvar _LocationMarkerUtils = require(\"../../../Models/LocationMarkerUtils\");\n\nvar _MapInteractionMode = _interopRequireWildcard(require(\"../../../Models/MapInteractionMode\"));\n\nvar _Loader = _interopRequireDefault(require(\"../../Loader\"));\n\nvar _class, _class2, _descriptor, _descriptor2, _descriptor3;\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _initializerDefineProperty(target, property, descriptor, context) { if (!descriptor) return; Object.defineProperty(target, property, { enumerable: descriptor.enumerable, configurable: descriptor.configurable, writable: descriptor.writable, value: descriptor.initializer ? descriptor.initializer.call(context) : void 0 }); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\nfunction _initializerWarningHelper(descriptor, context) { throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and runs after the decorators transform.'); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nvar LocationPicker = (0, _mobxReact.observer)(_class = (_class2 = /*#__PURE__*/function (_React$Component) {\n  _inherits(LocationPicker, _React$Component);\n\n  var _super = _createSuper(LocationPicker);\n\n  function LocationPicker(props) {\n    var _this;\n\n    _classCallCheck(this, LocationPicker);\n\n    _this = _super.call(this, props);\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"pickMode\", _descriptor, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"currentPick\", _descriptor2, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"pickDisposer\", _descriptor3, _assertThisInitialized(_this));\n\n    (0, _mobx.makeObservable)(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(LocationPicker, [{\n    key: \"setupPicker\",\n    value: function setupPicker() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          terria = _this$props.terria,\n          location = _this$props.location,\n          onPicking = _this$props.onPicking,\n          onPicked = _this$props.onPicked;\n      this.pickMode = new _MapInteractionMode[\"default\"]({\n        message: \"\",\n        messageAsNode: /*#__PURE__*/_react[\"default\"].createElement(\"div\", null),\n        uiMode: _MapInteractionMode.UIMode.Difference\n      });\n      addInteractionModeToMap(terria, this.pickMode);\n      if (location) showMarker(terria, location);\n      this.pickDisposer = (0, _mobx.reaction)(function () {\n        return _this2.pickMode.pickedFeatures;\n      }, (0, _mobx.action)(function (newPick) {\n        var _newPick$allFeaturesA;\n\n        if (newPick === undefined || newPick.pickPosition === undefined) {\n          return;\n        }\n\n        _this2.pickMode.customUi = function () {\n          return /*#__PURE__*/_react[\"default\"].createElement(_Loader[\"default\"], {\n            message: \"Querying \".concat(location ? \"new\" : \"\", \" position...\")\n          });\n        };\n\n        var position = cartesianToDegrees(newPick.pickPosition);\n        showMarker(_this2.props.terria, position);\n        _this2.currentPick = newPick;\n        onPicking(position);\n        (_newPick$allFeaturesA = newPick.allFeaturesAvailablePromise) === null || _newPick$allFeaturesA === void 0 ? void 0 : _newPick$allFeaturesA.then(function () {\n          if (newPick === _this2.currentPick) {\n            onPicked(newPick, position);\n          }\n        });\n      }));\n    }\n  }, {\n    key: \"destroyPicker\",\n    value: function destroyPicker() {\n      var _this$pickDisposer;\n\n      var terria = this.props.terria;\n\n      if (this.pickMode) {\n        removeInteractionModeFromMap(terria, this.pickMode);\n      }\n\n      (0, _LocationMarkerUtils.removeMarker)(terria);\n      this.pickMode = undefined;\n      this.currentPick = undefined;\n      (_this$pickDisposer = this.pickDisposer) === null || _this$pickDisposer === void 0 ? void 0 : _this$pickDisposer.call(this);\n      this.pickDisposer = undefined;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setupPicker();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.destroyPicker();\n      this.setupPicker();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.destroyPicker();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return null;\n    }\n  }]);\n\n  return LocationPicker;\n}(_react[\"default\"].Component), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"pickMode\", [_mobx.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, \"currentPick\", [_mobx.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, \"pickDisposer\", [_mobx.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _applyDecoratedDescriptor(_class2.prototype, \"setupPicker\", [_mobx.action], Object.getOwnPropertyDescriptor(_class2.prototype, \"setupPicker\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"destroyPicker\", [_mobx.action], Object.getOwnPropertyDescriptor(_class2.prototype, \"destroyPicker\"), _class2.prototype)), _class2)) || _class;\n\nexports[\"default\"] = LocationPicker;\n\nfunction addInteractionModeToMap(terria, mode) {\n  terria.mapInteractionModeStack.push(mode);\n}\n\nfunction removeInteractionModeFromMap(terria, mode) {\n  var _terria$mapInteractio = terria.mapInteractionModeStack.slice(-1),\n      _terria$mapInteractio2 = _slicedToArray(_terria$mapInteractio, 1),\n      currentMode = _terria$mapInteractio2[0];\n\n  if (currentMode === mode) {\n    terria.mapInteractionModeStack.pop();\n  }\n}\n\nfunction showMarker(terria, location) {\n  (0, _LocationMarkerUtils.addMarker)(terria, {\n    name: \"User selection\",\n    location: location,\n    customMarkerIcon: require(\"../../../../wwwroot/images/difference-pin.png\")\n  });\n}\n\nfunction cartesianToDegrees(cartesian) {\n  var carto = _Ellipsoid[\"default\"].WGS84.cartesianToCartographic(cartesian);\n\n  return {\n    longitude: _Math[\"default\"].toDegrees(carto.longitude),\n    latitude: _Math[\"default\"].toDegrees(carto.latitude)\n  };\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAA2CAYAAAAyEzKAAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGaADAAQAAAABAAAANgAAAAAbYi+LAAADOUlEQVRYCe1YPWgUQRT+3pEoqEWilSRBjSGNWKhga7DwBwTRKgqChXVM0igKGhRMFCXRQhsbFWOlIAhBm5ythRaCmCBGBAmIwRSx0EjW783tbnb3Zvbn7gqLe7A3M9977/tm3s7OLidIMW8QuyE4ihW2wA5em3it5/WL+A94+IAS3rJ9LhNsHSZJ3POYPoSTxC8xuTfpd44Fs/RdwTgmRZgZsZiIN4QOup/x2huJKdYVvOE0j8s4vgWJoQgFdpJ8ildH4Ky5FQoIDlPovXIYEW8EG7CIdxToqZk4mSj4hDbskhEslYxvETcbKqCkOmHlpQnLtJHAPK81CjTUBH9Yq80tJO3PJSD4wthH3LKz3NK6604xbytbt+nEBf0tDDzkjgo9L1jfE1rfAOF9vIGfeMLxkQCztuTXe9Jlda6CC1iH01EBdZkxcXYXdJxiXSrSmRKgrrKM2ol8vJyR36kieky4TfDd7aQny0/+Eu/Jx1QSYE9dfvLrSqZSSXjEcJsfs8UYPPsImtLnpIdbUg+38IipIhSeusA5dOO+DOC3dwdr8RlniF1nJdLK7XHL91aOlUFMM7ivirwaWCb0ldPZwnh9xrJsWm5jv5ZLj4C7WdG+v5Xt9pwCmnJPfyoi7XjK2c0o0DBTPuWlGRE+WCuc3bWGCSgR+QxvIGLI2zHJds706/+Z4yqUz1ilXOxS9S9LdtnH62vIY/h8llDEjNvwmELmbVaziuYrT8RiIqaGJZyP+It3mW94IpnWB5CfQmXeuH2RuHxdwWt+GvUlg2MriTiHWbaVyDi7W4kftgVaRfwPtYe2BCfm4YHrA88q4hNdYBu+CZ3kFccSV37RFeMU4azmmTjmSozhJYya+Bi4OnCKmJBuftIIz9s0U/823EoLSRXRY50i1psZktJv4kKgumPdwskwbumX3NIHkjgn8IplOliFJ4DUlYSxHgbY13dJ1JYprHim5RLhi2eG5/VEjI1jg8dA+yCXiEltxdUYRXIcc8YHue5JkOKdZYF84ypy5+ZfScBeQ9sUKVS0Zrma5SpUgULBzd3VLFehChQK/g93l/7roxa0OddTbCWe+f9qiS9h8z9WTg38A1O1vXOERmoNAAAAAElFTkSuQmCC\""],"sourceRoot":""}